(()=>{"use strict";var e,t=function(){function e(e,t){this.hp=50,this.hideStatus=!1,this.runStatus=!1,this.name=e}return e.prototype.attack=function(){this.dmg=Math.round(5*Math.random())},e.prototype.specialAttack=function(){},e.prototype.defend=function(){this.shield=Math.round(3*Math.random())},e.prototype.hide=function(){Math.random()>.5&&(this.hideStatus=!0)},e.prototype.runaway=function(){Math.random()>.9&&(this.runStatus=!0)},e.prototype.die=function(){},e}(),n=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),o=function(e){function t(t){return e.call(this,t,"전기")||this}return n(t,e),t.prototype.specialAttack=function(){console.log("".concat(this.name,"의 백만볼트!")),this.attack(),this.dmg+=2},t}(t),m=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(e){function t(t){return e.call(this,t,"물")||this}return m(t,e),t.prototype.specialAttack=function(){console.log("".concat(this.name,"의 물뿌리기!")),this.attack(),this.dmg+=1},t}(t),a=function(){function e(){}return e.prototype.setPokemon=function(e,t){this.myPokemon=e,this.enemyPokemon=t},e.prototype.myAction=function(e){switch(e){case 1:this.myPokemon.attack(),document.getElementById("battleprompt").innerHTML="".concat(this.myPokemon.dmg,"로 공격했다!");break;case 2:this.myPokemon.specialAttack(),document.getElementById("battleprompt").innerHTML="".concat(this.myPokemon.dmg,"로 특수 공격한다!");break;case 3:this.myPokemon.defend(),document.getElementById("battleprompt").innerHTML="".concat(this.myPokemon.shield,"로 방어한다!");break;case 4:this.myPokemon.hide(),document.getElementById("battleprompt").innerHTML="회피에 ".concat(this.myPokemon.hideStatus?"성공":"실패"," 했다.");break;case 5:this.myPokemon.runaway(),document.getElementById("battleprompt").innerHTML="도망에 ".concat(this.myPokemon.runStatus?"성공":"실패"," 했다.")}this.enemyResult=this.enemyAction(),this.battleResult(e,this.enemyResult)},e.prototype.enemyAction=function(){var e,t=Math.random();return t>.5&&t<1?(this.enemyPokemon.attack(),e="attack",document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"이(가) ").concat(this.enemyPokemon.dmg,"로 공격합니다.")):t>.4&&t<.5?(this.enemyPokemon.specialAttack(),e="attack",document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"이(가) ").concat(this.enemyPokemon.dmg,"로 특수 공격합니다.")):t>.1&&t<.4?(this.enemyPokemon.defend(),e="defend",document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"이(가) ").concat(this.enemyPokemon.shield,"로 방어합니다.")):t<.1?(this.enemyPokemon.hideStatus?document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"이(가) 회피합니다."):document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"이(가) 회피에 실패합니다."),e="hide"):(this.enemyPokemon.runStatus?document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"이(가) 도망갑니다."):document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"이(가) 도망에 실패합니다."),e="runaway"),e},e.prototype.battleResult=function(e,t){var n=t;switch(e){case 1:if("attack"==n)this.myPokemon.hp-=this.enemyPokemon.dmg,this.enemyPokemon.hp-=this.myPokemon.dmg;else if("defend"==n){var o=this.enemyPokemon.shield-this.myPokemon.dmg;this.enemyPokemon.hp-=o>0?o:-o}else if("hide"==n)this.enemyPokemon.hideStatus||(this.enemyPokemon.hp-=this.myPokemon.dmg);else if("runaway"==n){if(this.enemyPokemon.runStatus){this.enemyPokemon.hp=0;break}this.enemyPokemon.hp-=this.myPokemon.dmg}break;case 2:if("attack"==n)this.myPokemon.hp-=this.enemyPokemon.dmg,this.enemyPokemon.hp-=this.myPokemon.dmg;else if("defend"==n)o=this.enemyPokemon.shield-this.myPokemon.dmg,this.enemyPokemon.hp-=o>0?o:-o;else if("hide"==n)this.enemyPokemon.hideStatus||(this.enemyPokemon.hp-=this.myPokemon.dmg);else if("runaway"==n){if(this.enemyPokemon.runStatus){this.enemyPokemon.hp=0;break}this.enemyPokemon.hp-=this.myPokemon.dmg}break;case 3:if("attack"==n)o=this.myPokemon.shield-this.enemyPokemon.dmg,this.myPokemon.hp-=o>0?o:-o;else{if("defend"==n)break;if("hide"==n)break;if("runaway"==n){if(this.enemyPokemon.runStatus){this.enemyPokemon.hp=0;break}break}}break;case 4:if(this.myPokemon.hideStatus){if("runaway"==n&&this.enemyPokemon.runStatus){this.enemyPokemon.hp=0;break}}else if("attack"==n)this.myPokemon.hp-=this.enemyPokemon.dmg;else if("runaway"==n&&this.enemyPokemon.runStatus){this.enemyPokemon.hp=0;break}break;case 5:if(this.myPokemon.runStatus){this.myPokemon.hp=0;break}if("attack"==n)this.myPokemon.hp-=this.enemyPokemon.dmg;else if("runaway"==n&&this.enemyPokemon.runStatus){this.enemyPokemon.hp=0;break}break;default:console.log("...")}var m=document.getElementById("myhp"),i=document.getElementById("enemyhp");m.value=this.myPokemon.hp,i.value=this.enemyPokemon.hp,this.myPokemon.hp<=0?(this.myPokemon.die(),document.getElementById("actionSelectionBox").hidden=!0,document.getElementById("battleprompt").innerHTML="".concat(this.myPokemon.name,"이(가) 쓰러졌다..."),document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"이(가) 승리했다!")):this.enemyPokemon.hp<=0&&(this.enemyPokemon.die(),document.getElementById("actionSelectionBox").hidden=!0,document.getElementById("battleprompt").innerHTML="".concat(this.myPokemon.name,"이(가) 승리했다!"),document.getElementById("enemybattleprompt").innerHTML="".concat(this.enemyPokemon.name,"은 쓰러졌다..."))},e}();new(function(){function e(){var e=this;this.battleManager=new a,document.getElementById("startGame").onclick=function(){e.setup()},document.getElementById("attack").onclick=function(){e.battleManager.myAction(1)},document.getElementById("specialatk").onclick=function(){e.battleManager.myAction(2)},document.getElementById("defense").onclick=function(){e.battleManager.myAction(3)},document.getElementById("hide").onclick=function(){e.battleManager.myAction(4)},document.getElementById("runaway").onclick=function(){e.battleManager.myAction(5)}}return e.prototype.play=function(){document.getElementById("battleprompt").innerHTML="행동을 선택하세요."},e.prototype.setup=function(){var e=this;console.log("게임이 시작되었습니다."),document.getElementById("ispoke").innerHTML="플레이할 포켓몬을 골라주세요.";var t=document.getElementById("startPika"),n=document.getElementById("startKkobu");t.disabled=!1,n.disabled=!1,t.onclick=function(){e.createPokemon(1)},n.onclick=function(){e.createPokemon(2)}},e.prototype.createPokemon=function(e){var t,n;if(1===e){t=new o("피카츄"),n=new i("꼬부기");var m=document.getElementById("mypic"),a=document.getElementById("enemypic");m.src="../src/pika.webp",a.src="../src/kkobu.webp"}else t=new i("꼬부기"),n=new o("피카츄"),m=document.getElementById("mypic"),a=document.getElementById("enemypic"),m.src="../src/kkobu.webp",a.src="../src/pika.webp";this.battleManager.setPokemon(t,n);var c=document.getElementById("myhp"),s=document.getElementById("enemyhp");c.max=t.hp,c.value=t.hp,s.max=n.hp,s.value=n.hp,document.getElementById("ispoke").innerHTML="";var r=document.getElementById("battlebody"),y=document.getElementById("setupbody");r.hidden=!1,y.hidden=!0,this.play()},e}())})();